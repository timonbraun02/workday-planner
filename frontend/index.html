<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workday Planner</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <button class="theme-toggle" onclick="toggleDarkMode()" id="themeBtn" title="Dark Mode umschalten">&#9790;</button>
            <h1>Workday Planner</h1>
            <p>Optimiere deine Home Office Tage effizient</p>
        </div>

        <div class="tab-nav">
            <button class="tab-btn active" onclick="switchTab(event, 'planer')">HO-Planer</button>
            <button class="tab-btn" onclick="switchTab(event, 'zeitrechner')">Arbeitszeitrechner</button>
            <button class="tab-btn" onclick="switchTab(event, 'advanced')">Advanced HO Planer</button>
        </div>

        <div id="tab-planer" class="tab-content active">
        <div class="content">
            <form id="planForm">
                <div class="form-section">
                    <h2>Zeiträume</h2>

                    <!-- Globales Bundesland -->
                    <div class="form-row" style="margin-bottom: 16px;">
                        <div class="form-group">
                            <label for="bundesland">Bundesland (für alle Zeiträume)</label>
                            <select id="bundesland">
                                <option value="">Nur bundesweite Feiertage</option>
                                <option value="BW">Baden-Württemberg</option>
                                <option value="BY">Bayern</option>
                                <option value="BE">Berlin</option>
                                <option value="BB">Brandenburg</option>
                                <option value="HB">Bremen</option>
                                <option value="HH">Hamburg</option>
                                <option value="HE">Hessen</option>
                                <option value="MV">Mecklenburg-Vorpommern</option>
                                <option value="NI">Niedersachsen</option>
                                <option value="NW">Nordrhein-Westfalen</option>
                                <option value="RP">Rheinland-Pfalz</option>
                                <option value="SL">Saarland</option>
                                <option value="SN">Sachsen</option>
                                <option value="ST">Sachsen-Anhalt</option>
                                <option value="SH">Schleswig-Holstein</option>
                                <option value="TH">Thüringen</option>
                            </select>
                        </div>
                    </div>

                    <!-- Dynamische Zeitraum-Liste -->
                    <div class="period-list" id="periodList"></div>
                    <button type="button" class="btn-add-period" onclick="addPeriod()">
                        + Zeitraum hinzufügen
                    </button>
                </div>

                <div class="form-section" style="margin-bottom: 10px;">
                    <div class="checkbox-group">
                        <input type="checkbox" id="fourDayWeek">
                        <label for="fourDayWeek" style="margin-bottom: 0;">4-Tage-Woche aktivieren</label>
                    </div>
                </div>

                <div style="display:flex; gap:10px; flex-wrap:wrap;">
                    <button type="submit" class="btn-primary">Berechnen</button>
                    <button type="button" class="btn-secondary" onclick="planerReset()">Zurücksetzen</button>
                </div>
            </form>

            <div id="error" class="error"></div>

            <div id="results" class="results">
                <h2>Ergebnis</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Kalendertage</div>
                        <div class="stat-value">
                            <span id="totalCalendarDays">0</span>
                            <span class="stat-unit">Tage</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Arbeitstage gesamt</div>
                        <div class="stat-value">
                            <span id="totalWorkdays">0</span>
                            <span class="stat-unit">Tage</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Wochenendtage</div>
                        <div class="stat-value">
                            <span id="weekendDays">0</span>
                            <span class="stat-unit">Tage</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Feiertage</div>
                        <div class="stat-value">
                            <span id="publicHolidays">0</span>
                            <span class="stat-unit">Tage</span>
                        </div>
                    </div>
                </div>

                <div class="highlight-card">
                    <h3>Erforderliche Bürotage</h3>
                    <div class="highlight-value">
                        <span id="requiredOfficeDays">0</span>
                    </div>
                    <p style="margin-top: 10px; color: #666;">
                        Das sind <strong id="officePercentage">0</strong>% deiner verfügbaren Arbeitstage
                    </p>
                </div>

                <div class="stats-grid" style="margin-top: 15px;">
                    <div class="stat-card">
                        <div class="stat-label">Bürotage pro Woche</div>
                        <div class="stat-value">
                            <span id="officeDaysPerWeek">0</span>
                            <span class="stat-unit">Tage / Woche</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Bürotage pro Monat</div>
                        <div class="stat-value">
                            <span id="officeDaysPerMonth">0</span>
                            <span class="stat-unit">Tage / Monat</span>
                        </div>
                    </div>
                </div>

                <!-- Wochenplanung -->
                <div class="stats-grid" style="margin-top: 10px;" id="weekPlanSection">
                    <div class="stat-card">
                        <div class="stat-label">Wochen im Zeitraum</div>
                        <div class="stat-value">
                            <span id="totalWeeks">0</span>
                            <span class="stat-unit">Wochen</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Wochen mit 2× Büro</div>
                        <div class="stat-value">
                            <span id="weeksWithDouble">0</span>
                            <span class="stat-unit">Wochen</span>
                        </div>
                    </div>
                </div>

                <!-- Brückentage -->
                <div class="brueckentage-section" id="brueckentageSection" style="display:none;">
                    <h3>Brückentage im Zeitraum</h3>
                    <p style="font-size:0.85rem; color:var(--text-muted); margin-bottom:10px;">Mit einem Urlaubstag an diesen Tagen erreichst du eine besonders lange Freizeit:</p>
                    <div id="brueckentageList"></div>
                </div>
            </div>
        </div>
        </div>

        <div id="tab-zeitrechner" class="tab-content">
        <div class="content">
            <form id="timeForm">
                <div class="form-section">
                    <h2>Arbeitszeit berechnen</h2>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="workStart">Arbeitsbeginn</label>
                            <input type="time" id="workStart" required>
                        </div>
                        <div class="form-group">
                            <label for="workEnd">Arbeitsende</label>
                            <div style="display: flex; gap: 8px;">
                                <input type="time" id="workEnd" required style="flex: 1;">
                                <button type="button" class="btn-quick" onclick="setEndNow()">Jetzt</button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="breakMinutes">Pause (Minuten)</label>
                            <input type="number" id="breakMinutes" min="0" value="45" required>
                        </div>
                        <div class="form-group">
                            <label for="targetHours">Sollzeit (Stunden, optional)</label>
                            <input type="number" id="targetHours" min="0" max="24" step="0.5" placeholder="z.B. 8">
                        </div>
                    </div>
                </div>
                <div style="display:flex; gap:10px; flex-wrap:wrap;">
                    <button type="submit" class="btn-primary">Berechnen</button>
                    <button type="button" class="btn-secondary" onclick="zeitrechnerReset()">Zurücksetzen</button>
                </div>
            </form>

            <div id="timeError" class="error"></div>
            <div id="timeWarning" class="warning"></div>

            <div id="timeResults" class="results">
                <h2>Ergebnis</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Brutto-Arbeitszeit</div>
                        <div class="stat-value">
                            <span id="grossTime">0:00</span>
                            <span class="stat-unit">h</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Pause</div>
                        <div class="stat-value">
                            <span id="breakTime">0:00</span>
                            <span class="stat-unit">h</span>
                        </div>
                    </div>
                </div>
                <div class="highlight-card">
                    <h3>Netto-Arbeitszeit</h3>
                    <div class="highlight-value">
                        <span id="netTime">0:00</span>
                        <span class="stat-unit" style="font-size: 1.5rem;">h</span>
                    </div>
                </div>
                <div class="overtime-card" id="overtimeCard" style="display:none;">
                    <h3>Soll-/Ist-Vergleich</h3>
                    <div class="overtime-value" id="overtimeValue">+0:00</div>
                    <p style="margin-top: 8px; font-size: 0.88rem; color: var(--text-muted);">Soll: <span id="targetDisplay">0:00</span> h &nbsp;|&nbsp; Ist: <span id="netTimeDisplay">0:00</span> h</p>
                </div>
            </div>
        </div>
        </div>

        <!-- Advanced HO Day Planer Tab -->
        <div id="tab-advanced" class="tab-content">
        <div class="content">
            <div class="form-section">
                <h2>Advanced HO Day Planer</h2>
                <p style="color: var(--text-muted); margin-bottom: 18px; font-size: 0.95rem;">
                    Verplane deine HO-Tage grafisch auf die Monate. Gib dein Jahresbudget ein und verteile die Tage mit den Reglern.
                </p>
            </div>

            <!-- Einstellungen -->
            <div class="adv-settings">
                <div class="form-group">
                    <label for="advYear">Jahr</label>
                    <input type="number" id="advYear" min="2020" max="2040" value="2026">
                </div>
                <div class="form-group">
                    <label for="advBudget">Verfügbare HO-Tage (Jahresbudget)</label>
                    <input type="number" id="advBudget" min="0" max="365" value="130">
                </div>
                <div class="form-group" style="flex: 0;">
                    <label style="visibility:hidden">Reset</label>
                    <button type="button" class="btn-primary" style="padding: 12px 24px; font-size: 0.95rem; width: auto;" onclick="advReset()">Zurücksetzen</button>
                </div>
            </div>

            <!-- Budget-Chips -->
            <div class="adv-budget">
                <div class="budget-chip">
                    <div class="chip-label">Gesamtbudget</div>
                    <div class="chip-value" id="advChipTotal">0</div>
                </div>
                <div class="budget-chip">
                    <div class="chip-label">Verplant</div>
                    <div class="chip-value" id="advChipUsed">0</div>
                </div>
                <div class="budget-chip" id="advChipRemCard">
                    <div class="chip-label">Verbleibend</div>
                    <div class="chip-value" id="advChipRem">0</div>
                </div>
            </div>

            <!-- Warnungen -->
            <div class="adv-warning" id="advWarn">Achtung: Du hast 90% deines HO-Budgets verplant!</div>
            <div class="adv-danger" id="advDanger">Zu viele Tage verplant! Du überschreitest dein Budget um <span id="advOver">0</span> Tage.</div>

            <!-- Canvas Chart -->
            <div class="chart-wrapper">
                <canvas id="advChart" height="320"></canvas>
            </div>

            <!-- Monats-Stepper -->
            <div class="month-controls" id="advMonthControls"></div>
        </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
